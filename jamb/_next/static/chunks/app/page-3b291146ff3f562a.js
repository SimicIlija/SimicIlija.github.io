(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2531:(e,l,t)=>{Promise.resolve().then(t.bind(t,8168))},8168:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>z});var r=t(5155),a=t(2115),s=t(2596),n=t(9688);function i(){for(var e=arguments.length,l=Array(e),t=0;t<e;t++)l[t]=arguments[t];return(0,n.QP)((0,s.$)(l))}let o=a.forwardRef((e,l)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:l,className:i("w-full caption-bottom text-sm",t),...a})})});o.displayName="Table";let u=a.forwardRef((e,l)=>{let{className:t,...a}=e;return(0,r.jsx)("thead",{ref:l,className:i("[&_tr]:border-b",t),...a})});u.displayName="TableHeader";let d=a.forwardRef((e,l)=>{let{className:t,...a}=e;return(0,r.jsx)("tbody",{ref:l,className:i("[&_tr:last-child]:border-0",t),...a})});d.displayName="TableBody",a.forwardRef((e,l)=>{let{className:t,...a}=e;return(0,r.jsx)("tfoot",{ref:l,className:i("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...a})}).displayName="TableFooter";let c=a.forwardRef((e,l)=>{let{className:t,...a}=e;return(0,r.jsx)("tr",{ref:l,className:i("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...a})});c.displayName="TableRow";let f=a.forwardRef((e,l)=>{let{className:t,...a}=e;return(0,r.jsx)("th",{ref:l,className:i("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...a})});f.displayName="TableHead";let m=a.forwardRef((e,l)=>{let{className:t,...a}=e;return(0,r.jsx)("td",{ref:l,className:i("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...a})});m.displayName="TableCell",a.forwardRef((e,l)=>{let{className:t,...a}=e;return(0,r.jsx)("caption",{ref:l,className:i("mt-4 text-sm text-muted-foreground",t),...a})}).displayName="TableCaption";var x=t(2229);let b=x.bL,h=x.l9,g=a.forwardRef((e,l)=>{let{className:t,align:a="center",sideOffset:s=4,...n}=e;return(0,r.jsx)(x.ZL,{children:(0,r.jsx)(x.UC,{ref:l,align:a,sideOffset:s,className:i("z-50 w-72 rounded-md border bg-white p-4 text-gray-900 shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...n})})});g.displayName=x.UC.displayName;let y=a.forwardRef((e,l)=>{let{className:t,type:a,...s}=e;return(0,r.jsx)("input",{type:a,className:i("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-base text-gray-900 ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:l,...s})});y.displayName="Input";var p=t(9708),v=t(2085);let N=(0,v.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-blue-600 text-white hover:bg-blue-700",destructive:"bg-red-600 text-white hover:bg-red-700",outline:"border border-gray-300 bg-white text-gray-900 hover:bg-gray-100",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300",ghost:"hover:bg-gray-100 hover:text-gray-900",link:"text-blue-600 underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),w=a.forwardRef((e,l)=>{let{className:t,variant:a,size:s,asChild:n=!1,...o}=e,u=n?p.DX:"button";return(0,r.jsx)(u,{className:i(N({variant:a,size:s,className:t})),ref:l,...o})});w.displayName="Button";let j=(0,v.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-red-500/50 text-red-600 dark:border-red-500 [&>svg]:text-red-600"}},defaultVariants:{variant:"default"}}),S=a.forwardRef((e,l)=>{let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{ref:l,role:"alert",className:i(j({variant:a}),t),...s})});S.displayName="Alert",a.forwardRef((e,l)=>{let{className:t,...a}=e;return(0,r.jsx)("h5",{ref:l,className:i("mb-1 font-medium leading-none tracking-tight",t),...a})}).displayName="AlertTitle";let k=a.forwardRef((e,l)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:l,className:i("text-sm [&_p]:leading-relaxed",t),...a})});k.displayName="AlertDescription";let A=e=>{let l=["ones","twos","threes","fours","fives","sixes"].indexOf(e)+1;if(l>0)return"Multiple of ".concat(l," (0-").concat(5*l,")");switch(e){case"straight":return"0, 46, 56, or 66";case"trilling":return"0, 20, 23, 26, 29, 32, 35, or 38";case"full":return"0-60";case"poker":return"0, 40, 44, 48, 52, 56, 60, or 64";case"yamb":return"0, 50, 55, 60, 65, 70, 75, or 80";case"max":case"min":return"5-30";default:return""}};function R(e){let{isOpen:l,onOpenChange:t,onSubmit:s,onDelete:n,rowLabel:i,columnLabel:o,currentValue:u,rowType:d,children:c}=e,[f,m]=(0,a.useState)(""),[x,p]=(0,a.useState)(null),v=(0,a.useRef)(null);return(0,a.useEffect)(()=>{l&&(m(""),p(null),setTimeout(()=>{var e;null==(e=v.current)||e.focus()},0))},[l]),(0,r.jsxs)(b,{open:l,onOpenChange:t,children:[(0,r.jsx)(h,{asChild:!0,children:c}),(0,r.jsx)(g,{className:"w-64",side:"top",align:"center",sideOffset:10,avoidCollisions:!0,children:(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault();let l=parseInt(f,10);if(isNaN(l))return void p("Please enter a valid number");let r=((e,l)=>{let t=["ones","twos","threes","fours","fives","sixes"].indexOf(l)+1;if(t>0){let l=5*t;return e%t!=0?"Value must be a multiple of ".concat(t):e<0||e>l?"Value must be between 0 and ".concat(l):null}switch(l){case"straight":if(![0,46,56,66].includes(e))return"Value must be 0, 46, 56, or 66";break;case"trilling":if(e<0||e>38||0!==e&&(e-20)%3!=0)return"Invalid value for trilling";break;case"full":if(e<0||e>60)return"Value must be between 0 and 60";break;case"poker":if(e<0||e>64||0!==e&&(e-40)%4!=0)return"Invalid value for poker";break;case"yamb":if(e<0||e>80||0!==e&&(e-50)%5!=0)return"Invalid value for yamb";break;case"max":case"min":if(e<5||e>30)return"Value must be between 5 and 30"}return null})(l,d);if(r)return void p(r);s(l),t(!1),m(""),p(null)},className:"space-y-3",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("h4",{className:"font-medium text-sm",children:["Enter score for ",i," (",o,")"]}),A(d)&&(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Valid values: ",A(d)]}),(0,r.jsx)(y,{ref:v,type:"number",inputMode:"numeric",step:"1",min:"0",value:f,onChange:e=>{m(e.target.value),p(null)},onKeyDown:e=>{"Escape"===e.key&&(t(!1),m(""),p(null))},placeholder:"Enter score",className:"w-full"}),x&&(0,r.jsx)(S,{variant:"destructive",children:(0,r.jsx)(k,{children:x})})]}),(0,r.jsxs)("div",{className:"flex gap-2 justify-between",children:[null!==u&&(0,r.jsx)(w,{type:"button",variant:"destructive",size:"sm",onClick:()=>{n(),m("")},children:"Delete"}),(0,r.jsxs)("div",{className:"flex gap-2 ml-auto",children:[(0,r.jsx)(w,{type:"button",variant:"outline",size:"sm",onClick:()=>{t(!1),m("")},children:"Cancel"}),(0,r.jsx)(w,{type:"submit",size:"sm",children:"Submit"})]})]})]})})]})}let C=["↓","S","↑","N","D","↕"],T=["1","2","3","4","5","6","\uD835\uDF68","MAX","MIN","\uD835\uDF68","S","T","F","P","Y","\uD835\uDF68"];function E(e){let{scores:l,handleScoreSubmit:t,handleScoreDelete:a,activeCell:s,setActiveCell:n}=e;return(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)(o,{className:"max-w-full",children:[(0,r.jsx)(u,{children:(0,r.jsxs)(c,{children:[(0,r.jsx)(f,{className:"w-20"}),C.map((e,l)=>(0,r.jsx)(f,{className:"text-center",children:e},l))]})}),(0,r.jsx)(d,{children:Object.keys(l).map((e,i)=>(0,r.jsxs)(c,{children:[(0,r.jsx)(m,{className:"font-medium text-left border",children:T[i]}),l[e].map((l,o)=>{let u=e.toLowerCase().includes("sum"),d=(null==s?void 0:s.row)===e&&(null==s?void 0:s.index)===o;return u?(0,r.jsx)(m,{className:"text-center border bg-white text-black",children:l},o):(0,r.jsx)(R,{isOpen:d,onOpenChange:e=>{e||n(null)},onSubmit:t,onDelete:a,rowLabel:T[i],columnLabel:C[o],currentValue:l,rowType:e,children:(0,r.jsx)(m,{className:"text-center border cursor-pointer hover:bg-gray-100",onClick:()=>n({row:e,index:o}),children:l})},o)})]},e))})]})})}function O(e){let{stars:l,addStar:t,removeStar:a}=e;return(0,r.jsxs)("div",{className:"flex items-center gap-4 my-4",children:[(0,r.jsx)("button",{onClick:a,className:"px-4 py-2 bg-red-500 text-white rounded",children:"-"}),(0,r.jsxs)("div",{className:"text-2xl font-bold",children:["Stars: ",l]}),(0,r.jsx)("button",{onClick:t,className:"px-4 py-2 bg-green-500 text-white rounded",children:"+"})]})}let _={ones:Array(6).fill(null),twos:Array(6).fill(null),threes:Array(6).fill(null),fours:Array(6).fill(null),fives:Array(6).fill(null),sixes:Array(6).fill(null),sum1:Array(6).fill(null),max:Array(6).fill(null),min:Array(6).fill(null),sum2:Array(6).fill(null),straight:Array(6).fill(null),trilling:Array(6).fill(null),full:Array(6).fill(null),poker:Array(6).fill(null),yamb:Array(6).fill(null),totalSum:Array(6).fill(null)},I={SCORES:"yamb-scores-1",STARS:"yamb-stars-1"};function z(){let{scores:e,stars:l,addStar:t,removeStar:s,handleScoreSubmit:n,handleScoreDelete:i,activeCell:o,setActiveCell:u,calculateFinalResult:d,resetAll:c}=function(){let[e,l]=(0,a.useState)(_),[t,r]=(0,a.useState)(0),[s,n]=(0,a.useState)(!1),[i,o]=(0,a.useState)(null);(0,a.useEffect)(()=>{n(!0);let{scores:e,stars:t}=(()=>{try{let e=localStorage.getItem(I.SCORES),l=localStorage.getItem(I.STARS);return{scores:e?JSON.parse(e):_,stars:l?parseInt(l,10):0}}catch(e){return console.error("Failed to load from localStorage:",e),{scores:_,stars:0}}})();l(e),r(t)},[]),(0,a.useEffect)(()=>{s&&((e,l)=>{try{localStorage.setItem(I.SCORES,JSON.stringify(e)),localStorage.setItem(I.STARS,l.toString())}catch(e){console.error("Failed to save to localStorage:",e)}})(e,t)},[e,t,s]);let u=e=>{let l={...e};for(let e=0;e<6;e++){let t=(l.ones[e]||0)+(l.twos[e]||0)+(l.threes[e]||0)+(l.fours[e]||0)+(l.fives[e]||0)+(l.sixes[e]||0);t>=60&&(t+=30),l.sum1[e]=t>0?t:null;let r=l.max[e]||0,a=l.min[e]||0;if(r>0&&a>0){let t=(r-a)*(l.ones[e]||0);t>=60&&(t+=30),l.sum2[e]=t}else l.sum2[e]=null;let s=(l.sum1[e]||0)+(l.sum2[e]||0)+(l.straight[e]||0)+(l.trilling[e]||0)+(l.full[e]||0)+(l.poker[e]||0)+(l.yamb[e]||0);l.totalSum[e]=s>0?s:null}return l};return{scores:e,stars:t,addStar:()=>{r(t+1)},removeStar:()=>{t>0&&r(t-1)},handleScoreSubmit:t=>{if(!i)return;let{row:r,index:a}=i,s={...e};s[r][a]=t,l(u(s)),o(null)},handleScoreDelete:()=>{if(!i)return;let{row:t,index:r}=i,a={...e};a[t][r]=null,l(u(a)),o(null)},activeCell:i,setActiveCell:o,calculateFinalResult:()=>e.totalSum.reduce((e,l)=>e+(l||0),0)+20*t,resetAll:()=>{l({ones:Array(6).fill(null),twos:Array(6).fill(null),threes:Array(6).fill(null),fours:Array(6).fill(null),fives:Array(6).fill(null),sixes:Array(6).fill(null),sum1:Array(6).fill(null),max:Array(6).fill(null),min:Array(6).fill(null),sum2:Array(6).fill(null),straight:Array(6).fill(null),trilling:Array(6).fill(null),full:Array(6).fill(null),poker:Array(6).fill(null),yamb:Array(6).fill(null),totalSum:Array(6).fill(null)}),r(0)}}}(),f=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let e=async()=>{try{"wakeLock"in navigator&&(f.current=await navigator.wakeLock.request("screen"),console.log("Wake lock acquired"))}catch(e){console.error("Failed to acquire wake lock:",e)}},l=()=>{var l;"visible"===document.visibilityState&&(null==(l=f.current)?void 0:l.released)&&e()};return e(),document.addEventListener("visibilitychange",l),()=>{f.current&&!f.current.released&&(f.current.release(),console.log("Wake lock released")),document.removeEventListener("visibilitychange",l)}},[]),(0,r.jsxs)("main",{className:"flex flex-col items-center justify-center min-h-screen",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 my-4",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-center",children:"Yamb Scoreboard"}),(0,r.jsx)("button",{onClick:c,className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded font-medium",children:"Reset"})]}),(0,r.jsx)(O,{stars:l,addStar:t,removeStar:s}),(0,r.jsx)(E,{scores:e,handleScoreSubmit:n,handleScoreDelete:i,activeCell:o,setActiveCell:u}),(0,r.jsxs)("div",{className:"mt-6 p-4 bg-blue-100 rounded-lg",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-center text-black",children:"Final Result"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-center text-blue-800",children:[d()," points"]}),(0,r.jsxs)("p",{className:"text-sm text-center text-gray-600 mt-1",children:["(Total Sum + ",l," \xd7 20 star bonus)"]})]})]})}}},e=>{e.O(0,[508,441,964,358],()=>e(e.s=2531)),_N_E=e.O()}]);